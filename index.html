<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Dots – HTML Index</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    h1 { font-size: 26px; }
    ul { padding-left: 20px; }
    li { margin-bottom: 8px; }
    code { background:#eee; padding:2px 4px;border-radius:3px;}
  </style>
</head>
<body>
<h1>Dots – HTML File Index</h1>
<p>Automatically listing all <code>.html</code> files in the repo.</p>

<ul id="fileList"><li>Loading…</li></ul>

<script>
// CONFIG — change these if repo moves
const OWNER = "kahwoo";
const REPO = "Dots";
const BRANCH = "main";

// GitHub API URL
const API_URL = `https://api.github.com/repos/${OWNER}/${REPO}/git/trees/${BRANCH}?recursive=1`;

async function loadFiles() {
    const ul = document.getElementById("fileList");
    ul.innerHTML = "<li>Loading…</li>";

    try {
        const res = await fetch(API_URL);
        const data = await res.json();

        // get all .html files (but ignore index.html itself)
        const htmlFiles = data.tree.filter(
            f => f.path.endsWith(".html") && f.path !== "index.html"
        );

        ul.innerHTML = "";

        htmlFiles.forEach(f => {
            const rawUrl = `https://raw.githubusercontent.com/${OWNER}/${REPO}/${BRANCH}/${f.path}`;
            const previewUrl = `https://htmlpreview.github.io/?${rawUrl}`;

            const li = document.createElement("li");
            li.innerHTML = `<a href="${previewUrl}" target="_blank">${f.path}</a>`;
            ul.appendChild(li);
        });

        if (htmlFiles.length === 0) {
            ul.innerHTML = "<li>No HTML files found.</li>";
        }

    } catch (e) {
        ul.innerHTML = `<li>Error fetching file list: ${e}</li>`;
    }
}

loadFiles();
</script>

</body>
</html>
