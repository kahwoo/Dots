<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Black Hole Game</title>
<style>
body { margin:0; font-family:sans-serif; background:#041021; color:#e6eef8; }
canvas { display:block; margin:0 auto; background:radial-gradient(circle at 50% 50%, #041021, #071428); border-radius:10px; }
.controls { max-width:960px; margin:12px auto; display:flex; justify-content: space-between; align-items:center; }
button { padding:6px 12px; border:none; border-radius:6px; background:#0b1220; color:#e6eef8; cursor:pointer; }
</style>
</head>
<body>
<canvas id="game"></canvas>
<div class="controls">
<button id="startBtn">Start</button>
<button id="resetBtn">Reset</button>
<div>Score: <span id="score">0</span></div>
<div>Size: <span id="size">32</span></div>
<div>Time: <span id="time">60</span></div>
</div>
<script>
const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth * 0.9;
canvas.height = window.innerHeight * 0.7;
let W = canvas.width, H = canvas.height;

const CFG = { timeLimit:60, startSize:32, spawnRate:800, minObj:6, maxObj:40 };
let hole = {x: W/2, y: H/2, r: CFG.startSize, speed:5};
let objects = [];
let game = { running:false, score:0, timeLeft: CFG.timeLimit, spawnTimer:0 };

const scoreEl = document.getElementById('score');
const sizeEl = document.getElementById('size');
const timeEl = document.getElementById('time');

let keys = {};
window.addEventListener('keydown', e=>{ keys[e.key]=true; });
window.addEventListener('keyup', e=>{ keys[e.key]=false; });
canvas.addEventListener('mousemove', e=>{ hole.x = e.offsetX; hole.y = e.offsetY; });

function spawn(){
    const r = Math.random()*(CFG.maxObj-CFG.minObj)+CFG.minObj;
    const x = Math.random()*W;
    const y = Math.random()*H;
    const color = `hsl(${Math.random()*360},60%,60%)`;
    objects.push({x,y,r,color});
}

function loop(){
    if(!game.running) return;
    game.timeLeft -= 1/60;
    game.spawnTimer += 1000/60;
    if(game.spawnTimer>CFG.spawnRate){
        spawn();
        game.spawnTimer = 0;
    }

    // movement with arrows
    if(keys['ArrowUp']) hole.y -= hole.speed;
    if(keys['ArrowDown']) hole.y += hole.speed;
    if(keys['ArrowLeft']) hole.x -= hole.speed;
    if(keys['ArrowRight']) hole.x += hole.speed;
    hole.x = Math.max(hole.r, Math.min(W-hole.r, hole.x));
    hole.y = Math.max(hole.r, Math.min(H-hole.r, hole.y));

    // collision
    for(let i=objects.length-1;i>=0;i--){
        const o = objects[i];
        const d = Math.hypot(o.x-hole.x,o.y-hole.y);
        if(d < hole.r){
            if(o.r<=hole.r){
                hole.r += o.r*0.1;
                game.score += Math.round(o.r);
                objects.splice(i,1);
            }
        }
    }

    render();
    if(game.timeLeft>0) requestAnimationFrame(loop);
}

function render(){
    ctx.clearRect(0,0,W,H);
    // hole
    ctx.beginPath();
    ctx.arc(hole.x,hole.y,hole.r,0,Math.PI*2);
    ctx.fillStyle='black';
    ctx.fill();
    // objects
    objects.forEach(o=>{
        ctx.beginPath();
        ctx.arc(o.x,o.y,o.r,0,Math.PI*2);
        ctx.fillStyle=o.color;
        ctx.fill();
    });
    scoreEl.textContent = game.score;
    sizeEl.textContent = Math.floor(hole.r);
    timeEl.textContent = Math.max(0,Math.ceil(game.timeLeft));
}

document.getElementById('startBtn').addEventListener('click', ()=>{
    game.running = true;
    game.score=0;
    game.timeLeft=CFG.timeLimit;
    objects=[];
    hole.r = CFG.startSize;
    requestAnimationFrame(loop);
});

document.getElementById('resetBtn').addEventListener('click', ()=>{
    game.running=false;
    game.score=0;
    game.timeLeft=CFG.timeLimit;
    objects=[];
    hole.r = CFG.startSize;
    render();
});
</script>
</body>
</html>